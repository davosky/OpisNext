<!-- NEW  -->
<div class='row'>
  <div class='col-12'>
    <h3 class='text-primary p-2'>
      <i class='far fa-address-card'></i>&emsp;<strong>Sottoscrizioni GENERICHE</strong>
    </h3>
    <hr class='hr-primary p-2'/>
  </div>
</div>
<div class='row'>
  <div class='col-12'>
    <%= search_form_for @q, id: 'search-form', url: generic_subscriptions_path do |form| %>
      <div class='input-group p-1'>
        <div class='input-group-prepend'>
          <div class='input-group-text input-group-text-form'>
            <i class='fas fa-user'></i>
            &nbsp;
            Nome:&nbsp;
          </div>
        </div>
        <%= form.text_field :customer_name_cont, class:'form-control' %>
        &emsp;
        <div class='input-group-prepend'>
          <div class='input-group-text input-group-text-form'>
            <i class='far fa-user'></i>
            &nbsp;
            Cognome:&nbsp;
          </div>
        </div>
        <%= form.text_field :customer_forname_cont, class:'form-control' %>
        &emsp;
        <div class='input-group-prepend'>
          <div class='input-group-text input-group-text-form'>
            <i class='fas fa-id-card'></i>
            &nbsp;
            Codice Fiscale:&nbsp;
          </div>
        </div>
        <%= form.text_field :customer_fiscal_code_cont, class:'form-control' %>
        &emsp;
        <%= button_tag type: 'submit', class: 'btn btn-primary', title: 'Cerca', 'data-toggle' => 'tooltip', 'data-placement' => 'bottom' do %>
          <i class='fas fa-search'></i>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
<br/>
<div class='row'>
  <div class='col-12'>
    <div class='card'>
      <div class='card-body shadow'>
        <table class='table table-striped table-hover'>
          <thead>
            <tr>
              <th>Numero</th>
              <th>Data</th>
              <th>Nome</th>
              <th>Codice Fiscale</th>
              <th>Ammontare</th>
              <th>Note</th>
              <th colspan='1'></th>
            </tr>
          </thead>
          <tbody>
            <% @generic_subscriptions.each do |generic_subscription| %>
              <tr id='<%= dom_id(generic_subscription) %>' class='<%= cancelled?(generic_subscription) %>'>
                <td>
                  <%= link_to generic_subscription, title: 'Visualizza Dettaglio', 'data-toggle' => 'tooltip', 'data-placement' => 'bottom' do %>
                    <div class='circle-g200'>
                      <strong >
                        <%= generic_subscription.name %>
                      </strong>
                    </div>
                  <% end %>
                </td>
                <td><%= l(generic_subscription.date) %></td>
                <td>
                  <strong>
                    <%= generic_subscription_customer_full_name(generic_subscription) %>
                  </strong>
                </td>
                <td>
                  <strong>
                    <%= generic_subscription.customer_fiscal_code %>
                  </strong>
                </td>
                <td><%= number_to_currency(generic_subscription.payment) %></td>
                <td><%= truncate(generic_subscription.note, length: 35) %></td>
                <td>
                  <% unless current_user.institute == 'Ufficio Amministrazione' %>
                    <% unless generic_subscription.cancellation %>
                      <%= link_to edit_generic_subscription_path(generic_subscription), title: 'Modifica la Ricevuta', 'data-toggle' => 'tooltip', 'data-placement' => 'bottom' do %>
                        <i class='fas fa-edit'></i>
                      <% end %>
                    <% end %>
                  <% end %>
                  <% unless generic_subscription.pdf.attached? %>
                    &emsp;
                    <%= link_to generic_subscription_path(generic_subscription, format: 'pdf'), target: :_blank, title: 'Stampa la Ricevuta in PDF', 'data-toggle' => 'tooltip', 'data-placement' => 'bottom' do %>
                      <i class='fas fa-file-pdf'></i>
                    <% end %>
                  <% end %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
    <br>
  </div>
</div>
<div class='d-flex justify-content-center'>
  <%= will_paginate @generic_subscriptions, renderer: WillPaginate::ActionView::BootstrapLinkRenderer %>
</div>
<br/>
